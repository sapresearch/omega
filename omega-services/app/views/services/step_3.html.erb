<% require_stylesheet 'services.css' %>


<h1 class="page-content corners-top">
  Step 3 - Customize Your Service Registration Details
</h1>


<div class="page-content corners-bottom">

  <div class="steps">
    <div class="step3"></div>
  </div>

    <div class="content-services">

      <div>
        <p class="left2">
          <span class="style1">Service Details</span><br/>

          <% Service::Field.find_all_by_field_category_and_service_id("Service Details", @service.id).each do |s| %>

              <br/>

              <strong><%= s.field_name %></strong>:
              <%= Service::Detail.find_by_field_id_and_service_id(s.id, @service.id).field_value %>

          <% end %>
        </p>

      </div>


      <%= form_for @service, :action => "service_wizard" do |f| %>
          <%= errors_for_form(@service, 'service') %>

          <div class="split-line">

            <p class="left2">

              <span class="style1">Customize Registration Details</span> <br/>

              <br/>

              <% if @service.service_category.eql?("Enrollable") %>
              
              <strong> First Name <br/>
              Last Name <br/>
              Email <br/>
              Phone Numbers <br/>
              Notes <br/>
              </strong>


              <%else%>

              <strong>
              Email <br/>
              Phone Numbers <br/>
              Notes <br/>
              Questions <br/>


              </strong>

              <%end%>



              <% unless @registration_fields.empty? %>

                  <% @registration_fields.each_with_index do |field, index| %>

                      <%= f.fields_for "fields_attributes[#{index}]", field do |ff| %>

                          <%= ff.hidden_field :id %>

                          <%= ff.hidden_field :service_id %>
                          <%= ff.hidden_field :field_category %>

                          <strong><%= field.field_name %> </strong>



                      <% end %>
                  <% end %>
              <% end %>

            </p>


            <div id="add_registration_field_link">

              <%= link_to 'Add Registration Form Field', add_registration_field_services_url(:index => @service.fields.size + 1), :remote => true%>

            </div>
            
            <div id="service_registration_fields">

            </div>

            <% unless @registration_fields.empty? %>
                
                <p class="left2">

                  <strong>Select Fields You Would Want to Remove</strong>

                  <br/><br/>

                  <% @registration_fields.each_with_index do |d| %>


                      <%= f.fields_for "fields", d do |ff| %>

                          <%= ff.check_box '_destroy' %> <%= d.field_name %>
                          <%= ff.hidden_field :field_name %>
                          <%= ff.hidden_field :field_type %>

                          <br/>

                      <% end %>

                  <% end %>

            <% end %>

            </p>


          </div>


          <div class="bottom-buttons">




            <%= om_button(:icon=>'next-step') do %>
                <%= f.submit "Save", :name => "save" %>
            <% end %>


            <%= om_button(:icon=>'next-step') do %>
                <%= f.submit "Next", :name => 'next' %>
            <% end %>

            <%= om_button(:icon=>'prev-step') do %>
                <%= link_to 'Back', service_wizard_services_url(:step => 2) %>
            <% end %>


          <%= om_button(:icon=>'cancel') do %>
                <%= link_to 'Cancel', @service, :confirm => 'Do You Want to Quit?', :method => :delete %>
            <% end %>




      <% end %>
      </div>
    </div>

  </div>

